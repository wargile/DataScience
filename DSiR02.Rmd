---
title: "DSiR00"
author: "Robert A. Stevens"
date: "March 8, 2016"
output: html_document
---

**TODO:**

1. Finish outline

2. Add R code

3. Run R code and check

4. Do exercises

*Data Science in R: A Case Studies Approach to Computational Reasoning and Problem Solving*

by Deborah Nolan and Duncan Temple Lang

http://www.rdatasciencecases.org

## Chapter 2. Modeling Runnersâ€™ Times in the Cherry Blossom Race 

by Daniel Kaplan and Deborah Nolan

## 2.1 Introduction

Figure 2.1: Screen Shot of Cherry Blossom Run Web site. This page contains links to each year's race results. The year 1999 is the earliest for which they provide data. Men's and women's results are listed separately.

### 2.1.1 Computational Topics

## 2.2 Reading Tables of Race Results into R

Figure 2.2: Screen Shot of the 2012 Male Results. This screenshot shows the results, in race order, for mean competing in the 2012 Cherry Blossom 10 Mile Run. Notice that both 5-mile times and net times are provided. We know that the Time column is net time because it is so indicated in the header of the table.

Figure 2.3: Screen Shot of Men's 2011 Race Results. This screenshot shows the results, in race order, for men competing in the 2011 Cherry Blossom road race. Notice that in 2011, 3 times are recorded - the time to compete the first 5 miles and the gun and net times for the full run. In contrast, the results from 2012 do not provide gun time.

```{r, comment=NA}

```

```{r, comment=NA}

```
```{r, comment=NA}

```
```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

## 2.3 Data Cleaning and Reformatting Variables

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.4: Box Plot of Age by Year. These side-by-side boxplots of age for each race year show a few problems with the data for 2003 and 2006. The runners in these years are unusually young.

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.5: Box Plot of Age by Year. These side-by-side boxplots of age for each race year show a reasonable age distribution. For example, the lower quartile for all years range between 29 and 32. The problems indentified earlier for 2003 and 2006 have been addressed.

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

## 2.4 Exploring the Run Time for All Male Runners

```{r, comment=NA}

```

Figure 2.6: Default Scatter Plot for Run Time vs. Age for Male Runners. This plot demonstrated that a simple plot of run time by age for the 70,000 male runners leads to such severe overplotting that the shape of the data is not descernible.

### 2.4.1 Making Plots with Many Observations

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.7: Revised Scatter Plot of Male Runners. This plot revises the simple scatter plot of Figure 2.6 by changing the plotting symbol from a circle to a disk, reducing the size of the plotting symbol, using a transparent color for the disk, and adding a small amount of random noise to age. Now we see the shape of the high density region containing more of the runners and the lidght upward trend of time with increasing age.

```{r, comment=NA}

```

Figure 2.8: Smoothing Scatter Plot of Male Runners Race Times vs. Age. This plot offers an alternative to the scatter plot of Figure 2.7 that uses jittering and transparent color to ameliorate the over plotting. Here there is no need to jitter age because the smoothing action essentially does that for us by spreading an individual runner's (age, run time) pair over a small region. The shape of the high density region has a very similar shape to the earlier plot.

Figure 2.9: Side-by-Side Boxplots of Male Runners' Run Time vs. Age. This sequence of boxplots shows the quartiles of time for men grouped into 10-year age intervals. As age increases, all the quartiles increase. However, the box becomes asymmetrical with age, which indicates that the upper quartile increases faster than the median and lower quartile.

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

### 2.4.2 Fitting Models to Average Performance

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.10: Residual Plot from Fitting a Simple Linear Model of Performance to Age. Shown here is a smoothing scatter plot of the residuals from the fit of the simple linear model of run time to age for male runners who are 15 to 80 years old. Overlaid on the scatter plot are two curves. The "curve" in purple is a solid horizontal line at y = 0. The green dashed curve is a local smooth of the residuals.

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.11: Piecewise Linear and Loess Curves Fitted to Run Time vs. Age. Here we have plotted the fitted curves from loess() and a piecewise linear model with hinges at 30, 40, 50, and 60. These curves follow each other quite closely. However, there appears to be more curvature in the over 50 loess fit that is not captured in the piecewise linear fit.

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

### 2.4.3 Cross-Sectional Data and Covariates

Figure 2.12: Line Plot of the Number of Male Runners by Year. This plot shows that the number of male runners in the Cherry Blossom 10-mile race has more that doubled from 1999 to 2012.

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.13

```{r, comment=NA}

```

Figure 2.14

Figure 2.15


## 2.5 Constructing a Record for an Individual Runner across Years

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.16

## 2.6 Modeling the Change in Running Time for Individuals

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.17

```{r, comment=NA}

```

Figure 2.18

```{r, comment=NA}

```

```{r, comment=NA}

```

Figure 2.19

```{r, comment=NA}

```

```{r, comment=NA}

```

## 2.7 Scraping Race Results form the Web

Figure 2.20

Figure 2.21

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```
```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

```{r, comment=NA}

```

## 2.8 Exercises

Q.1

Q.2

Q.3

Q.4

Q.5

Q.6

Q.7

Q.8

Q.9

Q.10

Q.11

Q.12

Q.13

Q.14

Q.15

Q.16

Q.17

Q.18

Q.19
